<!DOCTYPE html>
<html>
<head>
  <title><%= t("branding.site_name") %></title>
  <%= stylesheet_link_tag    'sites', media: 'all', 'data-turbolinks-track' => true %>
  <%= javascript_include_tag 'application', 'data-turbolinks-track' => true %>
  <%= csrf_meta_tags %>

  <meta name="viewport" content="width=device-width, initial-scale=1.0">
</head>
<body>
  <%= render "shared/header" %>

  <div class="container">
    <%= flash_messages %>
  </div>

  <%= yield %>

  <%= render "shared/footer" %>

  <script src="https://code.highcharts.com/highcharts.js"></script>

  <script type="text/javascript">
    jQuery(document).ready(function () {

      // fix dimensions of chart that was in a hidden element
      jQuery(document).on( 'shown.bs.tab', 'a[data-toggle="tab"]', function (e) { // on tab selection event
          jQuery( ".contains-chart" ).each(function() { // target each element with the .contains-chart class
              var chart = jQuery(this).highcharts(); // target the chart itself
              chart.reflow() // reflow that chart
          });
      })

      <%= yield :footer_javascript %>
    });
  </script>
</body>
</html>
